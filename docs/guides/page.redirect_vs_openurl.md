# üìö –ù–∞–≤–∏–≥–∞—Ü–∏—è –≤ Movian: –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2025-11-20  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## üìñ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
2. [–î–≤–∞ —Å–ø–æ—Å–æ–±–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏](#–¥–≤–∞-—Å–ø–æ—Å–æ–±–∞-–Ω–∞–≤–∏–≥–∞—Ü–∏–∏)
3. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
4. [API Reference](#api-reference)
5. [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
6. [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)
7. [–í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ](#–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–æ–±–ª–µ–º–∞

```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –ò—Å—Ç–æ—Ä–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
page.redirect("myapp:video:123");
// –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ù–∞–∑–∞–¥" –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
```

### –†–µ—à–µ–Ω–∏–µ

```javascript
// ‚úÖ –†–ï–®–ï–ù–ò–ï: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ navigation.openUrl()
var navigation = require('./lib/navigation');
navigation.openUrl("myapp:video:123");
// –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ù–∞–∑–∞–¥" –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
```

---

## üìä –î–≤–∞ —Å–ø–æ—Å–æ–±–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ú–µ—Ç–æ–¥ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ò—Å—Ç–æ—Ä–∏—è | –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|-------|-----------|---------|----------------|-------------------|
| **`page.redirect(url)`** | –ó–∞–º–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã | ‚ùå –ù–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç | ‚ùå –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç | –†–µ–¥–∏—Ä–µ–∫—Ç—ã, –æ—à–∏–±–∫–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |
| **`navigation.openUrl(url)`** | –ù–∞–≤–∏–≥–∞—Ü–∏—è –≤–ø–µ—Ä—ë–¥ | ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç | ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç | –ö–ª–∏–∫–∏, –ø–µ—Ä–µ—Ö–æ–¥—ã, –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ |

### –í–∏–∑—É–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

```
üìç redirect - –ó–∞–º–µ–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
[–ì–ª–∞–≤–Ω–∞—è] ‚Üí [–ê–Ω–∏–º–µ] ‚Üí redirect ‚Üí [–ü–ª–µ–µ—Ä]
                ‚îî‚îÄ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∞
–ù–∞–∑–∞–¥: [–ü–ª–µ–µ—Ä] ‚Üí [–ì–ª–∞–≤–Ω–∞—è] ‚ùå (–ø—Ä–æ–ø—É—Å—Ç–∏–ª–∏ –ê–Ω–∏–º–µ)

üìç openUrl - –ù–∞–≤–∏–≥–∞—Ü–∏—è –≤–ø–µ—Ä—ë–¥:
[–ì–ª–∞–≤–Ω–∞—è] ‚Üí [–ê–Ω–∏–º–µ] ‚Üí openUrl ‚Üí [–ü–ª–µ–µ—Ä]
            ‚îî‚îÄ –≤ –∏—Å—Ç–æ—Ä–∏–∏
–ù–∞–∑–∞–¥: [–ü–ª–µ–µ—Ä] ‚Üí [–ê–Ω–∏–º–µ] ‚Üí [–ì–ª–∞–≤–Ω–∞—è] ‚úÖ
```

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å `lib/navigation.js`

```javascript
/**
 * navigation.js - Helper –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≤ Movian
 * 
 * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç navigator.eventSink –≤–º–µ—Å—Ç–æ page.eventSink
 * –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏—Å—Ç–æ—Ä–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
 */

var prop = require('movian/prop');

/**
 * –ü–æ–ª—É—á–∏—Ç—å eventSink –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–∞
 * @returns {Object|null} Navigator eventSink –∏–ª–∏ null
 */
function getNavigatorEventSink() {
  try {
    var navigators = prop.global.navigators;
    if (!navigators) {
      console.error('[NAV] prop.global.navigators not found');
      return null;
    }
    
    // –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–≤—ã–π navigator —á–µ—Ä–µ–∑ nodes[0]
    if (navigators.nodes) {
      var nav = navigators.nodes[0];
      if (nav && nav.eventSink) {
        return nav.eventSink;
      }
    }
    
    console.error('[NAV] navigator.eventSink not found');
    return null;
  } catch (e) {
    console.error('[NAV] Error getting navigator eventSink:', e);
    return null;
  }
}

/**
 * –û—Ç–∫—Ä—ã—Ç—å URL —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏—Å—Ç–æ—Ä–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
 * 
 * @param {string} url - URL –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è
 * @param {Object} options - –û–ø—Ü–∏–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
 * @param {string} options.view - –¢–∏–ø –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (video, directory, etc)
 * @param {string} options.how - –°–ø–æ—Å–æ–± –æ—Ç–∫—Ä—ã—Ç–∏—è (newTab, newPage, etc)
 * @param {string} options.parenturl - URL —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
 * @returns {boolean} true –µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ, false –µ—Å–ª–∏ –æ—à–∏–±–∫–∞
 * 
 * @example
 * // –ü—Ä–æ—Å—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
 * navigation.openUrl("myapp:video:123");
 * 
 * @example
 * // –° –æ–ø—Ü–∏—è–º–∏
 * navigation.openUrl("myapp:video:123", {
 *   view: "video",
 *   parenturl: "myapp:list"
 * });
 */
function openUrl(url, options) {
  options = options || {};
  
  var eventSink = getNavigatorEventSink();
  if (!eventSink) {
    console.error('[NAV] Cannot open URL: navigator eventSink not found');
    return false;
  }
  
  var args = { url: url };
  if (options.view) args.view = options.view;
  if (options.how) args.how = options.how;
  if (options.parenturl) args.parenturl = options.parenturl;
  
  try {
    prop.sendEvent(eventSink, "openurl", args);
    console.log('[NAV] Opened URL:', url);
    return true;
  } catch (e) {
    console.error('[NAV] Error sending openurl event:', e);
    return false;
  }
}

// –≠–∫—Å–ø–æ—Ä—Ç
exports.getNavigatorEventSink = getNavigatorEventSink;
exports.openUrl = openUrl;
```

### –®–∞–≥ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–¥–µ

```javascript
// –í –ª—é–±–æ–º —Ñ–∞–π–ª–µ –ø–ª–∞–≥–∏–Ω–∞
var navigation = require('./lib/navigation');

// –û—Ç–∫—Ä—ã—Ç—å URL
navigation.openUrl("myapp:page:123");
```

---

## üìö API Reference

### `navigation.openUrl(url, options)`

–û—Ç–∫—Ä—ã–≤–∞–µ—Ç URL —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏—Å—Ç–æ—Ä–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-----|--------------|----------|
| `url` | string | ‚úÖ –î–∞ | URL –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è |
| `options` | object | ‚ùå –ù–µ—Ç | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ |
| `options.view` | string | ‚ùå –ù–µ—Ç | –¢–∏–ø –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (video, directory) |
| `options.how` | string | ‚ùå –ù–µ—Ç | –°–ø–æ—Å–æ–± –æ—Ç–∫—Ä—ã—Ç–∏—è (newTab, newPage) |
| `options.parenturl` | string | ‚ùå –ù–µ—Ç | URL —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã |

#### –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç

`boolean` - `true` –µ—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ, `false` –µ—Å–ª–∏ –æ—à–∏–±–∫–∞

#### –ü—Ä–∏–º–µ—Ä—ã

```javascript
// –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π
navigation.openUrl("myapp:video:123");

// –° —Ç–∏–ø–æ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
navigation.openUrl("myapp:video:123", { view: "video" });

// –û—Ç–∫—Ä—ã—Ç—å –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
navigation.openUrl("myapp:settings", { how: "newTab" });

// –° –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º —Ä–æ–¥–∏—Ç–µ–ª—è
navigation.openUrl("myapp:episode:5", {
  parenturl: "myapp:season:2"
});
```

---

### `navigation.getNavigatorEventSink()`

–ü–æ–ª—É—á–∏—Ç—å eventSink –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–∞ (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ).

#### –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç

`Object|null` - Navigator eventSink –∏–ª–∏ null –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω

#### –ü—Ä–∏–º–µ—Ä

```javascript
var eventSink = navigation.getNavigatorEventSink();
if (eventSink) {
  prop.sendEvent(eventSink, "openurl", { url: "..." });
}
```

---

## üíº –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –°–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ ‚Üí –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

```javascript
var page = require('movian/page');
var navigation = require('./lib/navigation');

new page.Route(/^myapp:list$/, function(page) {
  page.type = 'directory';
  page.metadata.title = '–°–ø–∏—Å–æ–∫';
  
  var items = [
    { id: 1, title: "–≠–ª–µ–º–µ–Ω—Ç 1" },
    { id: 2, title: "–≠–ª–µ–º–µ–Ω—Ç 2" },
    { id: 3, title: "–≠–ª–µ–º–µ–Ω—Ç 3" }
  ];
  
  items.forEach(function(item) {
    var elem = page.appendItem(
      "myapp:item:" + item.id,
      "directory",
      { title: item.title }
    );
    
    elem.onEvent('activate', function() {
      // ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º openUrl –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
      navigation.openUrl("myapp:item:" + item.id);
    });
  });
  
  page.loading = false;
});
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ö–ª–∏–∫ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- "–ù–∞–∑–∞–¥" ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞ —Å–ø–∏—Å–æ–∫ ‚úÖ

---

### –ü—Ä–∏–º–µ—Ä 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

```javascript
var popup = require('native/popup');
var navigation = require('./lib/navigation');

function findLastWatched(items) {
  // ... –ø–æ–∏—Å–∫ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω–æ–≥–æ
}

function resumePlayback(page, items) {
  setTimeout(function() {
    var lastWatched = findLastWatched(items);
    if (!lastWatched) return;
    
    var message = '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä?\n"' + lastWatched.title + '"';
    
    if (popup.message(message, true, true)) {
      // ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º openUrl
      navigation.openUrl(lastWatched.url);
    }
  }, 1000);
}

new page.Route(/^myapp:series:(.*)$/, function(page, id) {
  // ... –∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–∏–π ...
  
  resumePlayback(page, episodes);
  
  page.loading = false;
});
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- Popup ‚Üí –î–∞ ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —ç–ø–∏–∑–æ–¥
- "–ù–∞–∑–∞–¥" ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–µ—Ä–∏–π ‚úÖ

---

### –ü—Ä–∏–º–µ—Ä 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º

```javascript
var navigation = require('./lib/navigation');

new page.Route(/^myapp:premium:(.*)$/, function(page, contentId) {
  // ‚ùå redirect –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –Ω–∞ –ª–æ–≥–∏–Ω
  if (!isLoggedIn()) {
    page.redirect("myapp:login?return=myapp:premium:" + contentId);
    return;
  }
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–º–∏—É–º –∫–æ–Ω—Ç–µ–Ω—Ç
  page.type = 'video';
  // ...
});

new page.Route(/^myapp:login$/, function(page) {
  // ... —Ñ–æ—Ä–º–∞ –ª–æ–≥–∏–Ω–∞ ...
  
  page.appendAction("–í–æ–π—Ç–∏", function() {
    if (login(username, password)) {
      // ‚úÖ openUrl –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –∫–æ–Ω—Ç–µ–Ω—Ç—É
      var returnUrl = getQueryParam('return') || 'myapp:home';
      navigation.openUrl(returnUrl);
    }
  });
});
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –ª–æ–≥–∏–Ω (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–µ–º–∏—É–º-–∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–µ –≤ –∏—Å—Ç–æ—Ä–∏–∏)
- –ü–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞ ‚Üí openUrl –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫ –∫–æ–Ω—Ç–µ–Ω—Ç—É (–≤ –∏—Å—Ç–æ—Ä–∏–∏) ‚úÖ

---

### –ü—Ä–∏–º–µ—Ä 4: –ü–ª–µ–π–ª–∏—Å—Ç —Å –∞–≤—Ç–æ–ø–µ—Ä–µ—Ö–æ–¥–æ–º

```javascript
var navigation = require('./lib/navigation');

new page.Route(/^myapp:player:(.*)$/, function(page, videoId) {
  var video = getVideo(videoId);
  
  // ‚ùå redirect –µ—Å–ª–∏ –≤–∏–¥–µ–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
  if (!video) {
    page.redirect("myapp:error404");
    return;
  }
  
  page.type = 'video';
  page.source = video.url;
  
  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ–∫–æ–Ω—á–∞–Ω–∏—è –≤–∏–¥–µ–æ
  page.onEvent('ended', function() {
    var nextVideo = getNextVideo(videoId);
    
    if (nextVideo) {
      // ‚úÖ openUrl –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∏–¥–µ–æ
      navigation.openUrl("myapp:player:" + nextVideo.id);
    } else {
      // ‚ùå redirect –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ —Å–ø–∏—Å–æ–∫
      page.redirect("myapp:playlist:" + video.playlistId);
    }
  });
});
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í–∏–¥–µ–æ –∑–∞–∫–æ–Ω—á–∏–ª–æ—Å—å ‚Üí —Å–ª–µ–¥—É—é—â–µ–µ –≤–∏–¥–µ–æ (–≤ –∏—Å—Ç–æ—Ä–∏–∏)
- –ü–ª–µ–π–ª–∏—Å—Ç –∑–∞–∫–æ–Ω—á–∏–ª—Å—è ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –Ω–∞ —Å–ø–∏—Å–æ–∫ (–Ω–µ –≤ –∏—Å—Ç–æ—Ä–∏–∏) ‚úÖ

---

### –ü—Ä–∏–º–µ—Ä 5: –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏–∑ –º–µ–Ω—é

```javascript
var navigation = require('./lib/navigation');

new page.Route(/^myapp:start$/, function(page) {
  page.type = 'directory';
  page.metadata.title = '–ì–ª–∞–≤–Ω–∞—è';
  
  // ‚úÖ –í—Å–µ –ø—É–Ω–∫—Ç—ã –º–µ–Ω—é —á–µ—Ä–µ–∑ openUrl
  page.appendAction("üì∫ –ö–∞—Ç–∞–ª–æ–≥", function() {
    navigation.openUrl("myapp:catalog");
  });
  
  page.appendAction("‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ", function() {
    navigation.openUrl("myapp:favorites");
  });
  
  page.appendAction("üîç –ü–æ–∏—Å–∫", function() {
    navigation.openUrl("myapp:search");
  });
  
  page.appendAction("‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏", function() {
    navigation.openUrl("settings:");
  });
  
  page.loading = false;
});
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –õ—é–±–æ–π –ø—É–Ω–∫—Ç –º–µ–Ω—é ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- "–ù–∞–∑–∞–¥" –∏–∑ –ª—é–±–æ–π ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –≤ –º–µ–Ω—é ‚úÖ

---

## üîß –ü—Ä–∞–≤–∏–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `navigation.openUrl()` –∫–æ–≥–¥–∞:

#### 1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–ª–∏–∫–∞–µ—Ç –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç

```javascript
item.onEvent('activate', function() {
  navigation.openUrl(item.url); // ‚úÖ
});
```

#### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ –∫–æ–Ω—Ç–µ–Ω—Ç—É

```javascript
// –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä
if (shouldResume) {
  navigation.openUrl(lastEpisode.url); // ‚úÖ
}
```

#### 3. –ù–∞–≤–∏–≥–∞—Ü–∏—è –≤–ø–µ—Ä—ë–¥ –ø–æ –ø–æ—Ç–æ–∫—É

```javascript
// –°–ª–µ–¥—É—é—â–∏–π —ç–ø–∏–∑–æ–¥ –ø–æ—Å–ª–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
onVideoEnd(function() {
  navigation.openUrl(nextEpisode.url); // ‚úÖ
});
```

#### 4. –ü–µ—Ä–µ—Ö–æ–¥—ã –∏–∑ –º–µ–Ω—é

```javascript
page.appendAction("–†–∞–∑–¥–µ–ª", function() {
  navigation.openUrl("myapp:section"); // ‚úÖ
});
```

---

### ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `page.redirect()` –∫–æ–≥–¥–∞:

#### 1. –†–µ–¥–∏—Ä–µ–∫—Ç –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏

```javascript
if (!hasAccess) {
  page.redirect("myapp:error403"); // ‚úÖ
  return;
}
```

#### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ URL

```javascript
if (oldUrlFormat) {
  page.redirect(convertToNewUrl(url)); // ‚úÖ
  return;
}
```

#### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

```javascript
function refreshPage() {
  page.redirect(page.url + "?t=" + Date.now()); // ‚úÖ
}
```

#### 4. –í—Ä–µ–º–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (splash)

```javascript
// –ó–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —ç–∫—Ä–∞–Ω ‚Üí –≥–ª–∞–≤–Ω–∞—è
setTimeout(function() {
  page.redirect("myapp:home"); // ‚úÖ
}, 2000);
```

---

## üéØ –ü—Ä–∞–≤–∏–ª–æ –±–æ–ª—å—à–æ–≥–æ –ø–∞–ª—å—Ü–∞

> **–°–ø—Ä–æ—Å–∏—Ç–µ —Å–µ–±—è:** *"–î–æ–ª–∂–µ–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–Ω–æ–ø–∫–æ–π '–ù–∞–∑–∞–¥'?"*
> 
> - **–î–ê** ‚Üí `navigation.openUrl()`
> - **–ù–ï–¢** ‚Üí `page.redirect()`

### –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```
üìä –í —Ç–∏–ø–∏—á–Ω–æ–º –ø–ª–∞–≥–∏–Ω–µ:
navigation.openUrl() ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 90%
page.redirect()      ‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 10%
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "–ù–∞–∑–∞–¥" –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–°–∏–º–ø—Ç–æ–º—ã:**
```
–û—Ç–∫—Ä—ã–ª–∏: –ì–ª–∞–≤–Ω–∞—è ‚Üí –°–ø–∏—Å–æ–∫ ‚Üí –î–µ—Ç–∞–ª–∏ ‚Üí –ü–ª–µ–µ—Ä
"–ù–∞–∑–∞–¥": –ü–ª–µ–µ—Ä ‚Üí –°–ø–∏—Å–æ–∫ (–ø—Ä–æ–ø—É—Å—Ç–∏–ª–∏ –î–µ—Ç–∞–ª–∏) ‚ùå
```

**–ü—Ä–∏—á–∏–Ω–∞:**
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `page.redirect()` –≤–º–µ—Å—Ç–æ `navigation.openUrl()`

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// ‚ùå –ë—ã–ª–æ
page.redirect(details.url);

// ‚úÖ –°—Ç–∞–ª–æ
navigation.openUrl(details.url);
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: "navigator eventSink not found"

**–°–∏–º–ø—Ç–æ–º—ã:**
```
[NAV] Error: navigator.eventSink not found
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- Navigator –µ—â—ë –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
- –í—ã–∑–æ–≤ —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ (–¥–æ –∑–∞–ø—É—Å–∫–∞ UI)

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∏ fallback
var success = navigation.openUrl(url);
if (!success) {
  console.log("Fallback to redirect");
  page.redirect(url);
}
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –°–æ–±—ã—Ç–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

**–°–∏–º–ø—Ç–æ–º—ã:**
```
[NAV] Opened URL: myapp:test
// –ù–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –¥–ª—è —ç—Ç–æ–≥–æ URL (Route –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω)
- –û—à–∏–±–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ Route

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Route —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
new page.Route(/^myapp:test$/, function(page) {
  console.log("Route handler called"); // –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥
  // ...
});
```

---

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –î–≤–æ–π–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–°–∏–º–ø—Ç–æ–º—ã:**
```
// –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ò `item.url`, –∏ `onEvent('activate')` –æ—Ç–∫—Ä—ã–≤–∞—é—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É
- –î–≤–æ–π–Ω–æ–π –≤—ã–∑–æ–≤ `openUrl()`

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// ‚ùå –ü–ª–æ—Ö–æ - –¥–≤–æ–π–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ
var item = page.appendItem(url, "video", metadata);
item.onEvent('activate', function() {
  navigation.openUrl(url); // –î—É–±–ª–∏–∫–∞—Ç!
});

// ‚úÖ –•–æ—Ä–æ—à–æ - —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ onEvent
var item = page.appendItem("", "video", metadata); // –ü—É—Å—Ç–æ–π URL
item.onEvent('activate', function() {
  navigation.openUrl(url); // –¢–æ–ª—å–∫–æ –∑–¥–µ—Å—å
});

// ‚úÖ –ò–ª–∏ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ item.url (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
var item = page.appendItem(url, "video", metadata);
// –ù–ï –¥–æ–±–∞–≤–ª—è—Ç—å onEvent
```

---

## üî¨ –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–±—ã—Ç–∏–π

```
JavaScript                    C (Movian Core)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ navigation.js   ‚îÇ          ‚îÇ   navigator.c    ‚îÇ
‚îÇ                 ‚îÇ          ‚îÇ                  ‚îÇ
‚îÇ openUrl(url) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄsendEvent‚îÄ‚Üí nav_eventsink()|
‚îÇ                 ‚îÇ          ‚îÇ         ‚îÇ        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ         ‚ñº        ‚îÇ
                             ‚îÇ   nav_open0()    ‚îÇ
                             ‚îÇ         ‚îÇ        ‚îÇ
                             ‚îÇ         ‚ñº        ‚îÇ
                             ‚îÇ nav_insert_page()‚îÇ
                             ‚îÇ         ‚îÇ        ‚îÇ
                             ‚îÇ         ‚ñº        ‚îÇ
                             ‚îÇ   [–ò—Å—Ç–æ—Ä–∏—è]      ‚îÇ
                             ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ prop.global

```javascript
prop.global
‚îú‚îÄ‚îÄ navigators
‚îÇ   ‚îú‚îÄ‚îÄ nodes[0]           // ‚Üê –ü–µ—Ä–≤—ã–π navigator
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ eventSink      // ‚Üê –ü–†–ê–í–ò–õ–¨–ù–´–ô eventSink –¥–ª—è openurl
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages          // –°–ø–∏—Å–æ–∫ –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ currentpage    // –¢–µ–∫—É—â–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ canGoBack      // –ú–æ–∂–Ω–æ –ª–∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ canGoForward   // –ú–æ–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –≤–ø–µ—Ä—ë–¥
‚îÇ   ‚îî‚îÄ‚îÄ current            // –°—Å—ã–ª–∫–∞ –Ω–∞ –∞–∫—Ç–∏–≤–Ω—ã–π navigator
‚îî‚îÄ‚îÄ eventSink              // –ì–ª–æ–±–∞–ª—å–Ω—ã–π eventSink (–¥—Ä—É–≥–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ)
```

### –ü–æ—á–µ–º—É `nodes[0]` –∞ –Ω–µ `current`?

```javascript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
prop.global.navigators.current.eventSink
// current - —ç—Ç–æ —Å—Å—ã–ª–∫–∞ –Ω–∞ –∞–∫—Ç–∏–≤–Ω—É—é –°–¢–†–ê–ù–ò–¶–£, –Ω–µ navigator

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
prop.global.navigators.nodes[0].eventSink
// nodes[0] - —ç—Ç–æ –ø–µ—Ä–≤—ã–π NAVIGATOR —Å –µ–≥–æ eventSink
```

### –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É eventSink-–∞–º–∏

| EventSink | –ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è | –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è |
|-----------|---------------|--------------|------------------|
| `page.root.eventSink` | –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ | redirect, action | `page.redirect()` |
| `navigator.eventSink` | –ù–∞ –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–µ | openurl, redirect | `navigation.openUrl()` |
| `prop.global.eventSink` | –ì–ª–æ–±–∞–ª—å–Ω–æ | –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è | –°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã |

### –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Å—Ç—Ä–∞–Ω–∏—Ü—ã

```c
// 1. –°–æ–±—ã—Ç–∏–µ openurl –ø–æ–ª—É—á–µ–Ω–æ
nav_eventsink() ‚Üí EVENT_OPENURL

// 2. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã
nav_open0() ‚Üí —Å–æ–∑–¥–∞—ë—Ç nav_page_t

// 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
nav_insert_page() ‚Üí TAILQ_INSERT_TAIL(&nav->nav_history, ...)

// 4. –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ–π
nav_select() ‚Üí —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

// 5. –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ù–∞–∑–∞–¥"
nav_back() ‚Üí TAILQ_PREV(...) ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
```

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

### ‚úÖ –ü–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º –ø–ª–∞–≥–∏–Ω–∞

- [ ] –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `lib/navigation.js`
- [ ] –í—Å–µ –∫–ª–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `navigation.openUrl()`
- [ ] –†–µ–¥–∏—Ä–µ–∫—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `page.redirect()`
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –Ω–∞ –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–∞—Ö
- [ ] –ù–µ—Ç –¥–≤–æ–π–Ω—ã—Ö –æ—Ç–∫—Ä—ã—Ç–∏–π —Å—Ç—Ä–∞–Ω–∏—Ü
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- [ ] –ò—Å—Ç–æ—Ä–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ª–æ–≥–∏—á–Ω–∞ –∏ —É–¥–æ–±–Ω–∞

### ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

1. **–¢–µ—Å—Ç –ø—Ä—è–º–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:**
   - –ì–ª–∞–≤–Ω–∞—è ‚Üí –†–∞–∑–¥–µ–ª ‚Üí –î–µ—Ç–∞–ª–∏ ‚Üí –ö–æ–Ω—Ç–µ–Ω—Ç
   - –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è? ‚úÖ

2. **–¢–µ—Å—Ç –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥":**
   - –ö–æ–Ω—Ç–µ–Ω—Ç ‚Üí "–ù–∞–∑–∞–¥" ‚Üí –î–µ—Ç–∞–ª–∏
   - –î–µ—Ç–∞–ª–∏ ‚Üí "–ù–∞–∑–∞–¥" ‚Üí –†–∞–∑–¥–µ–ª
   - –†–∞–∑–¥–µ–ª ‚Üí "–ù–∞–∑–∞–¥" ‚Üí –ì–ª–∞–≤–Ω–∞—è
   - –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã? ‚úÖ

3. **–¢–µ—Å—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤:**
   - –û—à–∏–±–∫–∞ ‚Üí –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é
   - "–ù–∞–∑–∞–¥" –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞ –æ—à–∏–±–∫—É? ‚úÖ

4. **–¢–µ—Å—Ç –∞–≤—Ç–æ–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è:**
   - –û—Ç–∫—Ä—ã—Ç—å —Å–µ—Ä–∏—é ‚Üí Popup "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?"
   - –î–∞ ‚Üí –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —ç–ø–∏–∑–æ–¥
   - "–ù–∞–∑–∞–¥" ‚Üí –í–æ–∑–≤—Ä–∞—Ç –Ω–∞ —Å–µ—Ä–∏—é? ‚úÖ

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –ò—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã Movian

- `navigator.c` - –õ–æ–≥–∏–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- `es_prop.c` - JavaScript API –¥–ª—è prop
- `event.c` - –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π
- `page.js` - JavaScript –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
tail -f ~/.hts/showtime/log.txt | grep navigator

# –ü—Ä–æ—Å–º–æ—Ç—Ä JavaScript –ª–æ–≥–æ–≤
tail -f ~/.hts/showtime/log.txt | grep "anilibria.tv"

# –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞ –ø–ª–∞–≥–∏–Ω–∞
rm -rf ~/.hts/showtime/plugins/anilibria.tv
```

---

## üéì –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

1. **–î–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `navigation.openUrl()`** - —ç—Ç–æ —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é
2. **–î–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `page.redirect()`** - –∫–æ–≥–¥–∞ –∏—Å—Ç–æ—Ä–∏—è –Ω–µ –Ω—É–∂–Ω–∞
3. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π eventSink** - `prop.global.navigators.nodes[0].eventSink`
4. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"** - –≥–ª–∞–≤–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞

```javascript
// 90% —Å–ª—É—á–∞–µ–≤ - –Ω–∞–≤–∏–≥–∞—Ü–∏—è –≤–ø–µ—Ä—ë–¥
navigation.openUrl(url);

// 10% —Å–ª—É—á–∞–µ–≤ - —Ä–µ–¥–∏—Ä–µ–∫—Ç/–æ—à–∏–±–∫–∞
page.redirect(url);
```

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-20  
**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–õ–∏—Ü–µ–Ω–∑–∏—è:** MIT
